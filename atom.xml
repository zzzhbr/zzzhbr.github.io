<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>25℃ Share Time</title>
  
  <subtitle>记录linux,python,自动化，阅读，小技巧</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zzzhbr.github.io/"/>
  <updated>2019-09-07T07:11:22.495Z</updated>
  <id>https://zzzhbr.github.io/</id>
  
  <author>
    <name>25℃</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>堡垒机-jumpserver</title>
    <link href="https://zzzhbr.github.io/2019/09/07/%E5%A0%A1%E5%9E%92%E6%9C%BA-jumpserver/"/>
    <id>https://zzzhbr.github.io/2019/09/07/堡垒机-jumpserver/</id>
    <published>2019-09-07T13:15:25.811Z</published>
    <updated>2019-09-07T07:11:22.495Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="官方网站"><a href="#官方网站" class="headerlink" title="官方网站"></a>官方网站</h2><p><a href="http://jumpserver.org" target="_blank" rel="noopener">http://jumpserver.org</a></p><a id="more"></a><h2 id="Jumpserver-软件包环境要求："><a href="#Jumpserver-软件包环境要求：" class="headerlink" title="Jumpserver 软件包环境要求："></a>Jumpserver 软件包环境要求：</h2><p>Python = 3.6.x<br>Mysql Server ≥ 5.6<br>Mariadb Server ≥ 5.5.56<br>Redis</p><p>** 生产环境部署建议部署 1.4.8 版本 **</p><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p><strong>jumpserver服务端：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver ~]# cat /etc/redhat-release </span><br><span class="line">CentOS Linux release 7.4.1708 (Core) </span><br><span class="line"></span><br><span class="line">[root@jumpserver ~]# uname -r</span><br><span class="line">3.10.0-693.el7.x86_64</span><br><span class="line"></span><br><span class="line">[root@jumpserver ~]# uname -n</span><br><span class="line">jumpserver</span><br><span class="line"></span><br><span class="line">[root@jumpserver ~]# uname -m</span><br><span class="line">x86_64</span><br><span class="line"></span><br><span class="line">[root@jumpserver ~]# ifconfig ens33 | grep &quot;inet &quot;|awk &apos;&#123;print $2&#125;&apos;</span><br><span class="line">10.0.0.161</span><br></pre></td></tr></table></figure><p><strong>jumpserver被管理端：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver-client ~]# cat /etc/redhat-release </span><br><span class="line">CentOS Linux release 7.4.1708 (Core) </span><br><span class="line"></span><br><span class="line">[root@jumpserver-client ~]# uname -r</span><br><span class="line">3.10.0-693.el7.x86_64</span><br><span class="line"></span><br><span class="line">[root@jumpserver-client ~]# uname -n</span><br><span class="line">jumpserver-client</span><br><span class="line"></span><br><span class="line">[root@jumpserver-client ~]# uname -m</span><br><span class="line">x86_64</span><br><span class="line"></span><br><span class="line">[root@jumpserver-client ~]# ifconfig ens33 | grep &quot;inet &quot; | awk &apos;&#123; print $2&#125;&apos;</span><br><span class="line">10.0.0.162</span><br></pre></td></tr></table></figure><p>准备所需软件：</p><p>jumpserver： <a href="https://github.com/jumpserver/jumpserver" target="_blank" rel="noopener">https://github.com/jumpserver/jumpserver</a></p><p>luna： <a href="https://demo.jumpserver.org/download/luna" target="_blank" rel="noopener">https://demo.jumpserver.org/download/luna</a></p><p>coco： <a href="https://github.com/jumpserver/coco" target="_blank" rel="noopener">https://github.com/jumpserver/coco</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**在线下载代码方式： **</span><br><span class="line">git clone https://github.com/jumpserver/coco.git &amp;&amp; cd coco &amp;&amp; git</span><br></pre></td></tr></table></figure><p>python： wget <a href="https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tar.xz" target="_blank" rel="noopener">https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tar.xz</a></p><h2 id="手动本地jumpserver-服务端搭建"><a href="#手动本地jumpserver-服务端搭建" class="headerlink" title="手动本地jumpserver-服务端搭建"></a>手动本地jumpserver-服务端搭建</h2><h3 id="初始化一些系统环境设置："><a href="#初始化一些系统环境设置：" class="headerlink" title="初始化一些系统环境设置："></a>初始化一些系统环境设置：</h3><h4 id="1-创建软件包放置目录："><a href="#1-创建软件包放置目录：" class="headerlink" title="1. 创建软件包放置目录："></a>1. 创建软件包放置目录：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver ~]# mkdir /server/sources -p</span><br></pre></td></tr></table></figure><p>将所需软件全部放在/server/sources/ 目录里</p><p>软件包打包下载：</p><p>链接：<a href="https://pan.baidu.com/s/1ZJzXrLnsXqsqIMkLjKbrIw" target="_blank" rel="noopener">https://pan.baidu.com/s/1ZJzXrLnsXqsqIMkLjKbrIw</a><br>提取码：be45<br>复制这段内容后打开百度网盘手机App，操作更方便哦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver ~]# cd /server/sources/</span><br><span class="line">[root@jumpserver sources]# ls</span><br><span class="line">coco        luna.tar.gz   Python-3.6.1.tar.xz</span><br><span class="line">jumpserver  python-package</span><br></pre></td></tr></table></figure><h4 id="2-关闭防火墙"><a href="#2-关闭防火墙" class="headerlink" title="2. 关闭防火墙"></a>2. 关闭防火墙</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver sources]# systemctl stop firewalld</span><br><span class="line">[root@jumpserver sources]# systemctl disable firewalld </span><br><span class="line">[root@jumpserver sources]# systemctl status firewalld </span><br><span class="line">● firewalld.service - firewalld - dynamic firewall daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; disabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line">     Docs: man:firewalld(1)</span><br><span class="line">[root@jumpserver sources]# systemctl status firewalld </span><br><span class="line">● firewalld.service - firewalld - dynamic firewall daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; disabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line">     Docs: man:firewalld(1)</span><br></pre></td></tr></table></figure><h4 id="3-关闭selinux"><a href="#3-关闭selinux" class="headerlink" title="3. 关闭selinux"></a>3. 关闭selinux</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver sources]# setenforce 0</span><br><span class="line">[root@jumpserver sources]# getenforce</span><br><span class="line">只要显示Permissive或者Disabled就是成功</span><br><span class="line"></span><br><span class="line">将/etc/selinux/config配置文件里的SELINUX=enforcing改为SELINUX=disabled</span><br><span class="line">使其永久生效</span><br></pre></td></tr></table></figure><h5 id="4-如果生产环境需要开启selinux和防火墙的情况下则使用-直接复制整段进命令行运行即可-："><a href="#4-如果生产环境需要开启selinux和防火墙的情况下则使用-直接复制整段进命令行运行即可-：" class="headerlink" title="4. 如果生产环境需要开启selinux和防火墙的情况下则使用(直接复制整段进命令行运行即可)："></a>4. <strong>如果生产环境需要开启selinux和防火墙的情况下则使用(直接复制整段进命令行运行即可)：</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo -e &quot;\033[31m 1. 防火墙 Selinux 设置 \033[0m&quot; \</span><br><span class="line">&amp;&amp; if [ &quot;$(systemctl status firewalld | grep running)&quot; != &quot;&quot; ]; then firewall-cmd --zone=public --add-port=80/tcp --permanent; firewall-cmd --zone=public --add-port=2222/tcp --permanent; firewall-cmd --permanent --add-rich-rule=&quot;rule family=&quot;ipv4&quot; source address=&quot;172.17.0.0/16&quot; port protocol=&quot;tcp&quot; port=&quot;8080&quot; accept&quot;; firewall-cmd --reload; fi \</span><br><span class="line">&amp;&amp; if [ &quot;$(getenforce)&quot; != &quot;Disabled&quot; ]; then setsebool -P httpd_can_network_connect 1; fi</span><br></pre></td></tr></table></figure><h4 id="5-配置中文环境（整段复制到命令行运行即可）："><a href="#5-配置中文环境（整段复制到命令行运行即可）：" class="headerlink" title="5. 配置中文环境（整段复制到命令行运行即可）："></a>5. 配置中文环境（整段复制到命令行运行即可）：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \</span><br><span class="line">&amp;&amp; yum -y install kde-l10n-Chinese \</span><br><span class="line">&amp;&amp; localedef -c -f UTF-8 -i zh_CN zh_CN.UTF-8 \</span><br><span class="line">&amp;&amp; export LC_ALL=zh_CN.UTF-8 \</span><br><span class="line">&amp;&amp; echo &apos;LANG=&quot;zh_CN.UTF-8&quot;&apos; &gt; /etc/locale.conf</span><br></pre></td></tr></table></figure><p>重新登录命令行终端即可生效</p><h3 id="安装相关软件"><a href="#安装相关软件" class="headerlink" title="安装相关软件"></a>安装相关软件</h3><h4 id="依赖软件"><a href="#依赖软件" class="headerlink" title="依赖软件"></a>依赖软件</h4><p>所需依赖软件:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">wget #下载；</span><br><span class="line"></span><br><span class="line">epel-release #扩展源；</span><br><span class="line"></span><br><span class="line">sqlite-devel #数据库；</span><br><span class="line"></span><br><span class="line">xz #解压；</span><br><span class="line"></span><br><span class="line">gcc #编译器；</span><br><span class="line"></span><br><span class="line">automake #编译相关；</span><br><span class="line"></span><br><span class="line">zlib-devel #压缩；</span><br><span class="line"></span><br><span class="line">openssl-devel #加密；</span><br><span class="line"></span><br><span class="line">git #git相关</span><br><span class="line">[root@jumpserver ~]# yum -y install wget epel-release sqlite-devel xz gcc automake zlib-devel openssl-devel epel-release git</span><br></pre></td></tr></table></figure><h4 id="编译安装python3-6-1"><a href="#编译安装python3-6-1" class="headerlink" title="编译安装python3.6.1"></a>编译安装python3.6.1</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver ~]# cd /server/sources/</span><br><span class="line">[root@jumpserver sources]# ls</span><br><span class="line">coco        luna.tar.gz          python-package</span><br><span class="line">jumpserver  Python-3.6.1.tar.xz</span><br><span class="line">[root@jumpserver sources]# ./configure  &amp;&amp;  make  &amp;&amp; make install </span><br><span class="line"></span><br><span class="line">[root@jumpserver ~]# cd /server/sources/</span><br><span class="line"></span><br><span class="line">[root@jumpserver sources]# tar xf Python-3.6.1.tar.xz</span><br><span class="line"></span><br><span class="line">[root@jumpserver sources]# cd Python-3.6.1</span><br><span class="line"></span><br><span class="line">[root@jumpserver sources]# ./configure  &amp;&amp;  make  -j 4 &amp;&amp; make install</span><br></pre></td></tr></table></figure><h5 id="使用-Python-虚拟环境（使多版本的python互不影响，共存）"><a href="#使用-Python-虚拟环境（使多版本的python互不影响，共存）" class="headerlink" title="使用 Python 虚拟环境（使多版本的python互不影响，共存）"></a><strong>使用 Python 虚拟环境（使多版本的python互不影响，共存）</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver Python-3.6.1]# cd /opt/  </span><br><span class="line">[root@jumpserver opt]# python3 -m venv py3   #在opt目录下创建一个py3的虚拟环境</span><br><span class="line">[root@jumpserver opt]# source /opt/py3/bin/</span><br><span class="line">activate          easy_install-3.6  python</span><br><span class="line">activate.csh      pip               python3</span><br><span class="line">activate.fish     pip3              </span><br><span class="line">easy_install      pip3.6            </span><br><span class="line">[root@jumpserver opt]# source /opt/py3/bin/activate</span><br><span class="line">(py3) [root@jumpserver opt]#    #切换成功的，前面有一个(py3)标识</span><br></pre></td></tr></table></figure><h4 id="安装-Jumpserver"><a href="#安装-Jumpserver" class="headerlink" title="安装 Jumpserver"></a>安装 Jumpserver</h4><p>这里用的版本是 Jumpserver 1.0.0</p><p><strong>重新打开一个10.0.0.161的shell连接窗口（注意前面没有py3所以不是在python3的虚拟环境下运行）</strong></p><p>①. 安装rpm依赖</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver ~]# cd /server/sources/jumpserver/requirements</span><br><span class="line"></span><br><span class="line">[root@jumpserver requirements]# cat rpm_requirements.txt </span><br><span class="line">libtiff-devel libjpeg-devel libzip-devel freetype-devel lcms2-devel libwebp-devel tcl-devel tk-devel sshpass openldap-devel mysql-devel libffi-devel openssh-clients</span><br><span class="line"></span><br><span class="line">[root@jumpserver requirements]# yum install -y `cat rpm_requirements.txt`</span><br></pre></td></tr></table></figure><p>②. 安装 Python 库依赖</p><p>在之前的 (py3) [root@jumpserver ~]# 窗口下进行</p><p>确保是这样的提示状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver ~]#</span><br></pre></td></tr></table></figure><p>如果不是请运行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> [root@jumpserver ~]# source /opt/py3/bin/activate</span><br><span class="line"></span><br><span class="line"> (py3) [root@jumpserver ~]#    #进入py3虚拟环境</span><br><span class="line">(py3) [root@jumpserver ~]# pip -V</span><br><span class="line">pip 9.0.1 from /opt/py3/lib/python3.6/site-packages (python 3.6)</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver requirements]# cd /server/sources/jumpserver/requirements  #pip在线安装</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver ~]# pip install --upgrade pip  -i https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver ~]# pip install -r /opt/jumpserver/requirements/requirements.txt -i https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure><p>③. 安装 Redis, Jumpserver 使用 Redis 做 cache 和 celery broke</p><p>（注意命令行的提示前缀；这里都不是py3虚拟环境）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver requirements]# yum  -y install redis</span><br><span class="line"></span><br><span class="line">[root@jumpserver requirements]# systemctl enable redis</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/redis.service to /usr/lib/systemd/system/redis.service.</span><br><span class="line"></span><br><span class="line">[root@jumpserver requirements]# systemctl start redis</span><br></pre></td></tr></table></figure><p>④. 安装 MySQL</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver requirements]# yum  install mariadb mariadb-devel mariadb-server   -y</span><br><span class="line"></span><br><span class="line">[root@jumpserver requirements]#  systemctl enable mariadb;systemctl start mariadb</span><br></pre></td></tr></table></figure><p>⑤. 建数据库 Jumpserver 并授权</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver requirements]# mysql</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create database jumpserver default charset &apos;utf8&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; grant all on jumpserver.* to &apos;jumpserver&apos;@&apos;127.0.0.1&apos; identified by &apos;123456&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; exit;</span><br></pre></td></tr></table></figure><p>⑥. 改 Jumpserver 配置文件</p><p>将下载来的jumpserver移动到app目录下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">[root@jumpserver requirements]# mkdir -p /server/app</span><br><span class="line"></span><br><span class="line">[root@jumpserver requirements]# cd /server/app/</span><br><span class="line"></span><br><span class="line">[root@jumpserver app]# cp -r /server/sources/jumpserver/ .</span><br><span class="line"></span><br><span class="line">[root@jumpserver app]# ls</span><br><span class="line">jumpserver</span><br><span class="line"></span><br><span class="line">[root@jumpserver jumpserver]#  cp config_example.py config.py</span><br><span class="line"></span><br><span class="line">[root@jumpserver jumpserver]# vim config.py  </span><br><span class="line"></span><br><span class="line">#编辑class DevelopmentConfig(Config):这一段；因为默认使用该配置</span><br><span class="line"></span><br><span class="line">class DevelopmentConfig(Config):</span><br><span class="line">    DEBUG = True</span><br><span class="line">    DB_ENGINE = &apos;mysql&apos;</span><br><span class="line">    DB_HOST = &apos;127.0.0.1&apos;</span><br><span class="line">    DB_PORT = 3306</span><br><span class="line">    DB_USER = &apos;jumpserver&apos;</span><br><span class="line">    DB_PASSWORD = &apos;123456&apos;</span><br><span class="line">    DB_NAME = &apos;jumpserver&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">最终效果：</span><br><span class="line"></span><br><span class="line">[root@jumpserver jumpserver]# cat config.py </span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">    jumpserver.config</span><br><span class="line">    ~~~~~~~~~~~~~~~~~</span><br><span class="line"></span><br><span class="line">    Jumpserver project setting file</span><br><span class="line"></span><br><span class="line">    :copyright: (c) 2014-2017 by Jumpserver Team</span><br><span class="line">    :license: GPL v2, see LICENSE for more details.</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">BASE_DIR = os.path.dirname(os.path.abspath(__file__))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Config:</span><br><span class="line">    # Use it to encrypt or decrypt data</span><br><span class="line">    # SECURITY WARNING: keep the secret key used in production secret!</span><br><span class="line">    SECRET_KEY = os.environ.get(&apos;SECRET_KEY&apos;) or &apos;2vym+ky!997d5kkcc64mnz06y1mmui3lut#(^wd=%s_qj$1%x&apos;</span><br><span class="line"></span><br><span class="line">    # Django security setting, if your disable debug model, you should setting that</span><br><span class="line">    ALLOWED_HOSTS = [&apos;*&apos;]</span><br><span class="line"></span><br><span class="line">    # Development env open this, when error occur display the full process track, Production disable it</span><br><span class="line">    DEBUG = True</span><br><span class="line"></span><br><span class="line">    # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/</span><br><span class="line">    LOG_LEVEL = &apos;DEBUG&apos;</span><br><span class="line">    LOG_DIR = os.path.join(BASE_DIR, &apos;logs&apos;)</span><br><span class="line"></span><br><span class="line">    # Database setting, Support sqlite3, mysql, postgres ....</span><br><span class="line">    # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases</span><br><span class="line"></span><br><span class="line">    # SQLite setting:</span><br><span class="line">    DB_ENGINE = &apos;sqlite3&apos;</span><br><span class="line">    DB_NAME = os.path.join(BASE_DIR, &apos;data&apos;, &apos;db.sqlite3&apos;)</span><br><span class="line"></span><br><span class="line">    # MySQL or postgres setting like:</span><br><span class="line">    # DB_ENGINE = &apos;mysql&apos;</span><br><span class="line">    # DB_HOST = &apos;127.0.0.1&apos;</span><br><span class="line">    # DB_PORT = 3306</span><br><span class="line">    # DB_USER = &apos;root&apos;</span><br><span class="line">    # DB_PASSWORD = &apos;&apos;</span><br><span class="line">    # DB_NAME = &apos;jumpserver&apos;</span><br><span class="line"></span><br><span class="line">    # When Django start it will bind this host and port</span><br><span class="line">    # ./manage.py runserver 127.0.0.1:8080</span><br><span class="line">    HTTP_BIND_HOST = &apos;0.0.0.0&apos;</span><br><span class="line">    HTTP_LISTEN_PORT = 8080</span><br><span class="line"></span><br><span class="line">    # Use Redis as broker for celery and web socket</span><br><span class="line">    REDIS_HOST = &apos;127.0.0.1&apos;</span><br><span class="line">    REDIS_PORT = 6379</span><br><span class="line">    REDIS_PASSWORD = &apos;&apos;</span><br><span class="line">    BROKER_URL = &apos;redis://%(password)s%(host)s:%(port)s/3&apos; % &#123;</span><br><span class="line">        &apos;password&apos;: REDIS_PASSWORD,</span><br><span class="line">        &apos;host&apos;: REDIS_HOST,</span><br><span class="line">        &apos;port&apos;: REDIS_PORT,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def __getattr__(self, item):</span><br><span class="line">        return None</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#class DevelopmentConfig(Config):</span><br><span class="line">#    pass</span><br><span class="line">class DevelopmentConfig(Config):</span><br><span class="line">    DEBUG = True</span><br><span class="line">    DB_ENGINE = &apos;mysql&apos;</span><br><span class="line">    DB_HOST = &apos;127.0.0.1&apos;</span><br><span class="line">    DB_PORT = 3306</span><br><span class="line">    DB_USER = &apos;jumpserver&apos;</span><br><span class="line">    DB_PASSWORD = &apos;123456&apos;</span><br><span class="line">    DB_NAME = &apos;jumpserver&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TestConfig(Config):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class ProductionConfig(Config):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Default using Config settings, you can write if/else for different env</span><br><span class="line">config = DevelopmentConfig()</span><br></pre></td></tr></table></figure><p>⑦. 数据库表结构和初始化数据</p><p><strong>(py3)虚拟环境下进行；且确保之前的pip已经安装完成了</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver jumpserver]# cd /server/app/jumpserver/utils</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver utils]#  bash make_migrations.sh</span><br></pre></td></tr></table></figure><p>⑧. 运行jumpserver</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver utils]# cd /server/app/jumpserver/</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver jumpserver]# chmod +x jms </span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver jumpserver]# ./jms start all -d   #-d后台运行</span><br></pre></td></tr></table></figure><p>jumpserver的使用方法：<strong>./jms start|stop|status|restart all</strong></p><p>⑨. 访问测试</p><p><a href="http://10.0.0.161:8080/" target="_blank" rel="noopener">http://10.0.0.161:8080/</a></p><p>默认 账号：admin</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">密码：admin</span><br></pre></td></tr></table></figure><h3 id="安装-组件"><a href="#安装-组件" class="headerlink" title="安装 组件"></a>安装 组件</h3><p>在web页面上点击web终端</p><p>会看到：</p><p>Luna是单独部署的一个程序，你需要部署luna，coco，配置nginx做url分发, 如果你看到了这个页面，证明你访问的不是nginx监听的端口，祝你好运</p><p><strong>所以接下来，我们安装luna和coco</strong></p><h4 id="安装coco"><a href="#安装coco" class="headerlink" title="安装coco"></a>安装coco</h4><p>**coco实现了</p><p>SSH Server 和 Web Terminal Server 的组件，提供 SSH 和 WebSocket 接口,</p><p>使用 Paramiko 和 Flask 开发**</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver coco]# cd /server/sources/coco/requirements/</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver requirements]# yum install `cat rpm_requirements.txt`</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver requirements]# pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver requirements]# cp -r /server/sources/coco/ /server/app/</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver requirements]# cd /server/app/coco/</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver coco]# cp conf_example.py conf.py</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver coco]# chmod +x cocod </span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver coco]# ./cocod start -d</span><br><span class="line">Start coco process</span><br></pre></td></tr></table></figure><p>使用方法：<strong>./cocod start|stop|status|restart</strong></p><h4 id="安装Web-Terminal前端-Luna组件"><a href="#安装Web-Terminal前端-Luna组件" class="headerlink" title="安装Web-Terminal前端-Luna组件"></a>安装Web-Terminal前端-Luna组件</h4><p><strong>Luna概述：Luna现在是 Web Terminal 前端，计划前端页面都由该项目提供，Jumpserver 只提供 API，不再负责后台渲染html等</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver coco]# cd /server/sources/</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver sources]# tar xf luna.tar.gz </span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver sources]# cp -r luna /server/app/</span><br></pre></td></tr></table></figure><h4 id="配置Nginx整合各组件"><a href="#配置Nginx整合各组件" class="headerlink" title="配置Nginx整合各组件"></a>配置Nginx整合各组件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver sources]#  yum -y install nginx</span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver sources]# vim /etc/nginx/^Cinx.conf</span><br><span class="line">将原先的server&#123;&#125; 段全部替换掉</span><br></pre></td></tr></table></figure><p>** 最终的结果如下：**</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver nginx]# grep -Ev &quot;#|^$&quot; /etc/nginx/nginx.conf</span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    location /luna/ &#123;</span><br><span class="line">        try_files $uri / /index.html;</span><br><span class="line">        alias /server/app/luna/;</span><br><span class="line">    &#125;</span><br><span class="line">    location /media/ &#123;</span><br><span class="line">        add_header Content-Encoding gzip;</span><br><span class="line">        root /server/app/jumpserver/data/;</span><br><span class="line">    &#125;</span><br><span class="line">    location /static/ &#123;</span><br><span class="line">        root /server/app/jumpserver/data/;</span><br><span class="line">    &#125;</span><br><span class="line">    location /socket.io/ &#123;</span><br><span class="line">        proxy_buffering off;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    location / &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>语法检查</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver sources]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure><p>运行 Nginx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver nginx]# systemctl start nginx </span><br><span class="line"></span><br><span class="line">(py3) [root@jumpserver nginx]# systemctl enable nginx </span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.</span><br></pre></td></tr></table></figure><p>在web页面上点击</p><p>默认信息，确认即可</p><p>服务器命令行终端测试：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(py3) [root@jumpserver nginx]# ssh -p2222 admin@10.0.0.161</span><br><span class="line">The authenticity of host &apos;[10.0.0.161]:2222 ([10.0.0.161]:2222)&apos; can&apos;t be established.</span><br><span class="line">RSA key fingerprint is SHA256:8MCnHK0t1yfaxyf6fFq1e93fE9JDBc4hG00OlnWelXY.</span><br><span class="line">RSA key fingerprint is MD5:b5:6d:74:d6:00:90:f4:93:8f:b8:de:33:14:ea:6b:ee.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &apos;[10.0.0.161]:2222&apos; (RSA) to the list of known hosts.</span><br><span class="line">admin@10.0.0.161&apos;s password: #填写admin的密码admin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Administrator, 欢迎使用Jumpserver开源跳板机系统  </span><br><span class="line"></span><br><span class="line">    1) 输入 ID 直接登录 或 输入部分 IP,主机名,备注 进行搜索登录(如果唯一).</span><br><span class="line">    2) 输入 / + IP, 主机名 or 备注 搜索. 如: /ip</span><br><span class="line">    3) 输入 P/p 显示您有权限的主机.</span><br><span class="line">    4) 输入 G/g 显示您有权限的主机组.</span><br><span class="line">    5) 输入 G/g + 组ID 显示该组下主机. 如: g1</span><br><span class="line">    6) 输入 H/h 帮助.</span><br><span class="line">    0) 输入 Q/q 退出.</span><br></pre></td></tr></table></figure><p>用10.0.0.161就可以直接访问了，不需要再加8080</p><p><strong>到此安装成功</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;官方网站&quot;&gt;&lt;a href=&quot;#官方网站&quot; class=&quot;headerlink&quot; title=&quot;官方网站&quot;&gt;&lt;/a&gt;官方网站&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://jumpserver.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://jumpserver.org&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="linux" scheme="https://zzzhbr.github.io/categories/linux/"/>
    
      <category term="server" scheme="https://zzzhbr.github.io/categories/linux/server/"/>
    
    
      <category term="linux" scheme="https://zzzhbr.github.io/tags/linux/"/>
    
      <category term="server" scheme="https://zzzhbr.github.io/tags/server/"/>
    
  </entry>
  
  <entry>
    <title>个人博客折腾记</title>
    <link href="https://zzzhbr.github.io/2019/09/07/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%8A%98%E8%85%BE%E8%AE%B0/"/>
    <id>https://zzzhbr.github.io/2019/09/07/个人博客折腾记/</id>
    <published>2019-09-07T13:15:25.810Z</published>
    <updated>2019-09-07T13:17:21.428Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h2><p>现在博客网站极多，但是是不是总感觉有些地方不满意？<br>又或者看到有些人的博客感觉做的很漂亮，那他们又是怎么做的呢？</p><a id="more"></a><p>首先说说本站是利用gitpages+hexo框架搭建而成</p><ul><li><p>优点：</p><blockquote><p>不需要懂的编程，哪怕是HTML，CSS，JS都不懂的人都能做的静态博客网站<br>完全免费：利用Gitpage发布网站，还支持自定义域名（域名就需要购买了）<br>嗯，我也是都不懂，就这么搭建起来喽！ ~(｡≧3≦)ﾉ⌒☆</p></blockquote></li><li><p>缺点：</p><blockquote><p>静态网站<br>百度SEO较差<br>访问略慢</p></blockquote></li></ul><p><del>不过谁叫咱一穷二白呢，不光可以用此来练手，</del>最重要的就是免费免费免费<del>，无烦人广告无烦人广告无烦人广告；</del></p><p>不不不，绝对绝对绝对就是用来学习技术的，我才不会承认别的呢</p><p>只要gitpage不倒，网站就不会消失<strong>粗体</strong>，除非哪天你自己删了</p><p><strong>so just enjoy it!!!</strong></p><h1 id="准备工作："><a href="#准备工作：" class="headerlink" title="准备工作："></a>准备工作：</h1><p>0.一台能上网的电脑（这里以win为演示）</p><ol><li>下载<a href="Node.js">nodejs</a></li><li>下载<a href="https://git-scm.com" target="_blank" rel="noopener">Git</a></li><li><a href="https://hexo.io" target="_blank" rel="noopener">HEXO</a></li><li>HEXO的主题，这里我选用的是<a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">NexT</a>主题，简洁大气</li></ol><p><a href="Node.js">nodejs</a>和<a href="https://git-scm.com" target="_blank" rel="noopener">Git</a>就官网上下载好一键安装即可，一直无脑下一步下一步直到完成!</p><h1 id="HEXO的安装"><a href="#HEXO的安装" class="headerlink" title="HEXO的安装"></a>HEXO的安装</h1><blockquote><p>更加具体的文档可以参考官方的：<a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/index.html</a></p></blockquote><p>如果输入npm install -g hexo-cli遇到以下报错</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm should be run outside of the node repl, in your normal shell.</span><br><span class="line">(Press Control-D to exit.)</span><br></pre></td></tr></table></figure><p>在自己的硬盘下创建一个目录，最好不要有中文路径，我在E盘创建了个Myblog目录<br>然后进入<code>E:\Myblog</code>这个目录里，按住shift再右键<br><img src="https://raw.githubusercontent.com/zzzhbr/notebook-image/master/notebook/2019/09/05/1567643923207-1567643923235.png" alt="title"><br>点击打开在此处打开命令行终端</p><p>这里的意思是命令行在<code>E:\Myblog</code>这个目录里运行，同打开cmd然后cd切换到Mylog下面一样的效果<br>为了方便以后就会说在<code>E:\Myblog</code>目录下打开命令终端<br><strong>（请注意：其实几乎后面所有的命令行操作都是在这个目录下运行的）</strong></p><p>然后输入命令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. npm install -g express</span><br><span class="line"><span class="number">2</span>. npm install hexo-cli -g</span><br><span class="line"><span class="number">3</span>. hexo init blog</span><br><span class="line"><span class="number">4</span>. <span class="built_in">cd</span> blog</span><br><span class="line"><span class="number">5</span>. npm install</span><br><span class="line"><span class="number">6</span>. hexo server</span><br></pre></td></tr></table></figure><p>此时在<code>E:\Myblog</code>下又多了个<code>blog</code>目录，进去后显示</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml  #网站的 配置 信息，您可以在此配置大部分的参数</span><br><span class="line">├── package.json #应用程序的信息</span><br><span class="line">├── scaffolds #模版 文件夹</span><br><span class="line">├── source #资源文件夹</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><p>其实到这里你的网站框架已经搭建完成了，不信？<br>那你就<code>E:\Myblog\blog\</code>目录下运行命令测试下呗</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean     </span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>然后出现 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a><br>你在浏览器上访问就能看到生成的网站了<br>上面3条命令的意思就是清空，生成，运行，更加详细的说明介绍请看官方文档，多看看总不会错的！</p><h1 id="美化博客"><a href="#美化博客" class="headerlink" title="美化博客"></a>美化博客</h1><p>接下去的步骤就都是为了美化博客而做的了</p><h2 id="NexT的安装"><a href="#NexT的安装" class="headerlink" title="NexT的安装"></a>NexT的安装</h2><p>在命令行下（注意此处依旧是在<code>E:\Myblog</code>这个目录里的命令行）输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>看到<code>E:\Myblog</code>多了个<code>themes</code>目录，点进去看发现就是叫<code>next</code>，将<code>next</code>整个目录移动到<code>E:\Myblog\blog\themes\</code>下；<br>原先<code>E:\Myblog\blog\themes\</code>有个<code>landscape</code><br>原来的<code>E:\Myblog</code>多出来的<code>themes</code>就可以删掉了，避免弄错</p><h3 id="概念梳理"><a href="#概念梳理" class="headerlink" title="概念梳理"></a>概念梳理</h3><p>首先就是先梳理下目录<br>这里整篇文章的 目录 = 文件夹</p><p>然后到这里目录的情况就是这样的了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">`E:\Myblog\blog`是主目录，也称为根目录</span><br><span class="line">根目录下有个_config.yml ；大家的叫法多样 主配置文件/根配置文件/站点配置文件 （有时候真的是会傻傻分不清，他们说的究竟是哪个的）</span><br><span class="line"></span><br><span class="line">~~`E:\Myblog\blog\theme`是主题目录 因为主要是配置他下面的主题内容，所以这个目录可以忘记~~</span><br><span class="line"></span><br><span class="line">`E:\Myblog\blog\theme\next`是我们主要配置的主题 ，大家通常的叫法就是 主题目录</span><br><span class="line">这里也有个_config.yml ；但是请记得这是主题配置文件</span><br><span class="line"></span><br><span class="line">所以这里就有2个同名_config.yml ，这2个一定要区分好</span><br></pre></td></tr></table></figure><p>然后编辑<code>E:\Myblog\blog</code>的主配置文件<code>_config.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">将原先的theme:</span> <span class="string">landscape改为theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure><p>保存后可以来预览下效果<br>在<code>E:\Myblog\blog\</code>打开终端<br>输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br><span class="line">看到 INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br><span class="line">就证明成功，然后访问http://localhost:4000就能看到效果</span><br></pre></td></tr></table></figure><h3 id="坑1"><a href="#坑1" class="headerlink" title="坑1?"></a>坑1?</h3><p>用hexo加载next主题，所以</p><ul><li>主配置，根目录下：HEXO的主配置文件<code>E:\Myblog\blog\_config.yml</code>  </li><li>主题配置：Next主题的主配置文件<code>E:\Myblog\blog\themes\next\_config.yml</code></li></ul><p>这里因为网上资料比较多，因为查阅过得实在太多，而且好多内容也都是重复的，当时也没有记录下来，所以地址也就贴不出来了<br>可以搜索下，大概的关键词就是<br><code>hexo gitpage搭建博客</code><br><code>hexo搭建博客</code><br><code>hexo美化</code><br><code>next美化</code><br><code>hexo博客</code><br><code>next博客</code><br>等等吧，反正就是这几个关键词，随意组合组合就行<br>next和hexo官方的文档建议要看下</p><p>调试不需要你没修改一次就去敲一次</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean     </span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>这个是动态的，你配置文件修改好，去浏览器强制刷新（<code>ctrl + F5</code>）就可以出效果了<br>如果出现不了页面，就去命令行看看是不是因为修改配置缓存问题，所以强制关闭了（相信你也会经常碰到的），只要你去命令行看到的不是一直在等待状态的就重新运行下<code>hexo s</code>就可以了</p><p>注：不是一直在等待状态，就是最后一行有 <code>E:\Myblog\blog&gt;</code> 可以输入命令的状态</p><p>还有就是所有的配置文件，你要添加内容的时候，记得一定要先加个空格<br>比如<code>:</code>后面要有个空格再填内容才会生效</p><h3 id="坑2"><a href="#坑2" class="headerlink" title="坑2?"></a>坑2?</h3><p>NEXT和HEXO的版本不一样，所以有的写法可能不适用，出不来效果，或者干脆出错，所以记得及时备份呀，如果更改了很多效果之后，然后碰到个报错要重新来过心很凉，很奔溃的……</p><p>如果出错了但是又排查不出问题，咋整啊？<br>简单粗暴点，就是先把所有都关掉，然后把Myblog一整个删除，接着从<br> HEXO的安装  那步开始重新开始做</p><p><del>N多次的我，不要笑，你也会遇到的</del></p><p>话说我为什么要用NEXT7.4的版本啊，o(╥﹏╥)o ，好多都不一样了；<br>对了，next有4个样式</p><ol><li>Muse </li><li>Mist </li><li>Pisces</li><li>Gemini</li></ol><p>不同样式他的配置有时候得到的效果也不一样！</p><h3 id="坑3"><a href="#坑3" class="headerlink" title="坑3??"></a>坑3??</h3><p>（这里我已经忘记了为什么当时我会记录下这玩意儿了，可能不是坑，也可能是因为Mist样式的原因才记录）</p><p>如果想要文章目录自动展开，在<code>E:\Myblog\blog\themes\next\source\css\_custom\custom.styl</code><br>后面添加上</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//文章目录默认展开</span><br><span class="line">.post-toc .nav .nav-child &#123; display: block; &#125;</span><br></pre></td></tr></table></figure><p>不想在目录上看到自动添加序号,修改<code>E:\Myblog\blog\themes\next\_config.yml</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">number: true  改为 number: false</span><br></pre></td></tr></table></figure><h3 id="坑4"><a href="#坑4" class="headerlink" title="坑4?"></a>坑4?</h3><p>如果你按照网上的教程家里打赏后，会发现<br>打赏旋转比较鬼畜，然后的解决方法无效，<br>如果网上的无效不凡试试这个，<del>（如果你是看我的教程下载安装的next，那么我大概相信你会用到的。。。因为是7.4呀）</del><br>因为配置语法和之前的不同了，<br>关键就是旋转时间：<del>慢了大概就不鬼畜了</del><br>主要的就是修改语句： <code>animation: roll .5s infinite linear;</code><br><code>.5s</code>这个就是时间，这是我修改后的时间</p><p>修改配置文件：themes/next/source/css/_common/components/post/post-reward.styl</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (hexo-config(&apos;reward_settings.animation&apos;)) &#123;</span><br><span class="line">    &gt; div:hover p &#123;</span><br><span class="line">      animation: roll .5s infinite linear;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="坑5"><a href="#坑5" class="headerlink" title="坑5?"></a>坑5?</h3><p>底部标签的样式，就是把#号替换，网上都是清一色</p><p>修改/themes/next/layout/_macro/post.swig，搜索 rel=”tag”&gt;#，将 # 换成<i class="fa fa-tag"></i><br>搜索rel=”tag”&gt;#  根本没有结果，没办法呀，再瞅瞅查查呗，无果，最后只要发挥我的主观能动性，肯定是这个文件，那就慢慢看看哪里有#，改了效果咋样呗</p><p>最后：改成搜索rel=”tag”得到结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;&#123;&#123; url_for(tag.path) &#125;&#125;&quot; rel=&quot;tag&quot;&gt;&#123;&#123; tag_indicate &#125;&#125; &#123;&#123; tag.name &#125;&#125;&lt;/a&gt;</span><br></pre></td></tr></table></figure><p>然后我往上看有个<code>#</code>诶，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;footer class=&quot;post-footer&quot;&gt;</span><br><span class="line">  &#123;%- if post.tags and post.tags.length %&#125;</span><br><span class="line">    &#123;%- if theme.tag_icon %&#125;</span><br><span class="line">      &#123;%- set tag_indicate = &apos;&lt;i class=&quot;fa fa-flag&quot;&gt;&lt;/i&gt;&apos; %&#125;</span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">      &#123;%- set tag_indicate = &apos;#&apos; %&#125;</span><br><span class="line">    &#123;%- endif %&#125;</span><br><span class="line">    &lt;div class=&quot;post-tags&quot;&gt;</span><br><span class="line">      &#123;%- for tag in post.tags %&#125;</span><br><span class="line">        &lt;a href=&quot;&#123;&#123; url_for(tag.path) &#125;&#125;&quot; rel=&quot;tag&quot;&gt;&#123;&#123; tag_indicate &#125;&#125; &#123;&#123; tag.name &#125;&#125;&lt;/a&gt;</span><br><span class="line">      &#123;%- endfor %&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br></pre></td></tr></table></figure><p>把#替换掉就行<code>&lt;i class=&quot;fa fa-flag&quot;&gt;&lt;/i&gt;</code><br>我试了很久才发现这原来是个固定语法 <i class="fa fa-flag"></i><code>只有</code>flag`是可以替换的<br>这个样式效果可以去<br><a href="http://fontawesome.dashgame.com" target="_blank" rel="noopener">fontawesome</a><br>因为官方文档里有说，图标都是用的这个网站上的，挑个自己喜欢的就行</p><h3 id="坑6"><a href="#坑6" class="headerlink" title="坑6?"></a>坑6?</h3><p>博客上添加音乐<br>之前看到一个效果就是我现在博客上的音乐插件这样的效果，可是都做不出效果，这里也是坑了好久，<br>首先说下，调用的还是Aplayer这个第三方插件，播放器是网易云音乐的，<br>但是这个插件要用url：XXXXXXX.mp3的外链模式，不能直接调用网易云音乐库（或者是我不知道怎么调用？），<br>所以我这里就直接提供源码（和原Aplayer有些不一样，有更改）可以直接就用网易云的ID，调用网易云的外量播放器直接放，如果你链接的网易云曲库更新了，这边也会同步更新，但是有延迟</p><p>这里也算是参考结合了网上给出的方案总结出的新方法（<del>毕竟不懂，把这弄出来，那个开心啊</del>）</p><p>下载文件<br>在<code>\themes\next\source\</code>下新建一个<code>dist</code>文件（名字其实随意，主要就是接下去的调用的时候要根据你的名字来更改，所以这里就以dist来做）</p><p>然后修改<code>\themes\next\layout\</code>的<code>_layout.swig</code>文件，然后在结束标签之前加上</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/dist/APlayer.min.css&quot;&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/dist/APlayer.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;div id=&quot;aplayer&quot; class=&quot;aplayer&quot;  data-id=&quot;2889986160&quot; data-server=&quot;netease&quot; data-type=&quot;playlist&quot; data-fixed=&quot;true&quot; data-listfolded=&quot;true&quot; data-order=&quot;random&quot; data-theme=&quot;#F58EA8&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/dist/Meting.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>我加的位置是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  &#123;%- if theme.pjax %&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>就这段的上面，也就是倒数5行之上</p><div id="aplayer" class="aplayer" data-id="**2889986160**" 这里这个date-id后面跟着的数字就是你的网易云外链的数字 获取方法就是，网页点进网易云你要分享的歌单，然后生成外链播放器 里的那串就是你的，替换就好 <p><strong>参考网站：</strong><p></p><blockquote><p><a href="https://www.jianshu.com/p/822a1a12d471" target="_blank" rel="noopener">https://www.jianshu.com/p/822a1a12d471</a><br><a href="https://asdfv1929.github.io/2018/05/26/next-add-music/" target="_blank" rel="noopener">https://asdfv1929.github.io/2018/05/26/next-add-music/</a><br><a href="https://blog.csdn.net/yjwan521/article/details/80899992" target="_blank" rel="noopener">https://blog.csdn.net/yjwan521/article/details/80899992</a><br><a href="http://saili.science/2017/05/30/music/" target="_blank" rel="noopener">http://saili.science/2017/05/30/music/</a><br>一种是这样的写法：<a href="https://www.cnblogs.com/Guhongying/p/10461970.html" target="_blank" rel="noopener">https://www.cnblogs.com/Guhongying/p/10461970.html</a><br>另一种<a href="https://blog.csdn.net/sunshine940326/article/details/69933696" target="_blank" rel="noopener">https://blog.csdn.net/sunshine940326/article/details/69933696</a></p></blockquote><h3 id="坑7"><a href="#坑7" class="headerlink" title="坑7?"></a>坑7?</h3><p>自定义样式</p><p>说起这个网上说的都是修改themes\next\source\css_custom\custom.styl<br>但是7.4默认是没有这玩意儿的，没有的话，就证明应该要引用，可是哪个文件里引用呢？</p><p>在<code>\themes\next\source\css</code>有个<code>main.styl</code><br>打开这个文件，拉到最后，有这么一段话</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Custom Layer</span><br><span class="line">// --------------------------------------------------</span><br><span class="line">for $inject_style in hexo-config(&apos;injects.style&apos;)</span><br><span class="line">  @import $inject_style;</span><br></pre></td></tr></table></figure><p>这里就有custom了，所以就在最后添加上了一句话</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;_custom/custom&quot;</span><br></pre></td></tr></table></figure><p>然后你在<code>themes\next\source\css\</code>下面新建一个<code>_custom</code>目录，接着在这个牡蛎里面新建custom.styl加上样式就可以了；</p><h3 id="坑8"><a href="#坑8" class="headerlink" title="坑8?"></a>坑8?</h3><p>网页的动态线条的效果，<br>7.4的非常简单，只需要在主题配置文件中，将</p><p><img src="https://raw.githubusercontent.com/zzzhbr/notebook-image/master/notebook/2019/09/07/1567851460049-1567851460058.png" alt="title"><br>这几个中想要的效果把<code>false</code>改成<code>true</code>就可以调用了，然后接着搜索<br><img src="https://raw.githubusercontent.com/zzzhbr/notebook-image/master/notebook/2019/09/07/1567851616303-1567851616304.png" alt="title"><br>把这几个<code>:</code>后面的内容一一对应上面的照着复制下来就行了，<br>然后再刷新页面效果就有了</p><h3 id="坑9"><a href="#坑9" class="headerlink" title="坑9?"></a>坑9?</h3><p>在custom.styl里添加边框阴影<br><img src="https://raw.githubusercontent.com/zzzhbr/notebook-image/master/notebook/2019/09/07/1567850866415-1567850866459.png" alt="title"><br>类似这样，首先说下，用网上的方法，这个在Mist主题下首页是没有实现的，但是文章里是实现了，应该是主题样式的原因，，可能懂web前端的就能实现了，如果不懂又想要首页也有，可以用Pisces，这个样式可以实现</p><p>我用的是Mist样式，这里贴上我做的本站一些效果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">// Custom styles.</span><br><span class="line">//首页文章阴影样式</span><br><span class="line">.post &#123;</span><br><span class="line">    margin-top: 60px;</span><br><span class="line">    margin-bottom: 60px;</span><br><span class="line">    padding: 65px; </span><br><span class="line">    -webkit-box-shadow: 0 0 14px rgba(65,199,191, .5);</span><br><span class="line">    -moz-box-shadow: 0 0 14px rgba(65,199,191, .5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//文章标题样式</span><br><span class="line">.posts-expand .post-meta .post&#123;</span><br><span class="line">    margin-top: 60px;</span><br><span class="line">    margin-bottom: 60px;</span><br><span class="line">    padding: 65px; </span><br><span class="line">    -webkit-box-shadow: 0 0 14px rgba(65,199,191, .5);</span><br><span class="line">    -moz-box-shadow: 0 0 14px rgba(65,199,191, .5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 鼠标移动至文章标题时的效果</span><br><span class="line">.posts-expand .post-title-link::before &#123;</span><br><span class="line">    content: &quot;&quot;;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 2px;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    background-color: #ea481e;</span><br><span class="line">    visibility: hidden;</span><br><span class="line">    -webkit-transform: scaleX(0);</span><br><span class="line">    -moz-transform: scaleX(0);</span><br><span class="line">    -ms-transform: scaleX(0);</span><br><span class="line">    -o-transform: scaleX(0);</span><br><span class="line">    transform: scaleX(0);</span><br><span class="line">    transition-duration: 0.2s;</span><br><span class="line">    transition-timing-function: ease-in-out;</span><br><span class="line">    transition-delay: 0s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.posts-expand .post-title &#123;</span><br><span class="line">  font-size: 30px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  background-color: #41c7bf;</span><br><span class="line">  border-radius:.3em;</span><br><span class="line">  line-height:1.5em;</span><br><span class="line">  padding: 65px;</span><br><span class="line">  padding-bottom:.12em;</span><br><span class="line">  padding-top:.12em;</span><br><span class="line">  box-shadow:2px 2px 7px #9fb6cd;</span><br><span class="line"></span><br><span class="line">  margin: 8px 4px 8px 4px;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  +mobile() &#123;</span><br><span class="line">    font-size: 22px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.posts-expand .post-title a:hover &#123;</span><br><span class="line">  color: #ea481e;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//首页头部样式</span><br><span class="line">.header &#123;</span><br><span class="line">  background: #41c7bf;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">  font-color: #ea481e;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//首页尾部样式</span><br><span class="line">.footer &#123;</span><br><span class="line">    background: none;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">&#125;</span><br><span class="line">.footer-inner &#123;</span><br><span class="line">    text-align: ledt;</span><br><span class="line">    color: #41c7bf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//侧边栏信息样式修改</span><br><span class="line">.site-author-name &#123;</span><br><span class="line">    margin: 35px 0 0;</span><br><span class="line">    color: #ea481e;</span><br><span class="line">    font-family: &apos;Comic Sans MS&apos;, sans-serif;</span><br><span class="line">font-size: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//侧栏按钮样式</span><br><span class="line">.sidebar-toggle &#123;</span><br><span class="line">    background: #41c7bf;</span><br><span class="line">&#125;</span><br><span class="line">.back-to-top &#123;</span><br><span class="line">    background: #41c7bf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//文章目录样式</span><br><span class="line">.post-toc .nav .active&gt;a &#123;</span><br><span class="line">    color: #41c7bf;</span><br><span class="line">&#125;</span><br><span class="line">.post-toc ol a:hover &#123;</span><br><span class="line">    color: #41c7bf;</span><br><span class="line">&#125;</span><br><span class="line">.sidebar-nav .sidebar-nav-active:hover &#123;</span><br><span class="line">    color: #FFFFFF;</span><br><span class="line">&#125;</span><br><span class="line">a &#123;</span><br><span class="line">border-bottom-style:outset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//首页阅读全文样式</span><br><span class="line">.post-button &#123;</span><br><span class="line">    margin-top: 30px;</span><br><span class="line">    text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">.post-button .btn &#123;</span><br><span class="line">    color: #000000;</span><br><span class="line">    font-size: 15px;</span><br><span class="line">    background: #41c7bf;</span><br><span class="line">    border-radius: 16px;</span><br><span class="line">    line-height: 2;</span><br><span class="line">    margin: 0 4px 8px 4px;</span><br><span class="line">    padding: 0 20px;</span><br><span class="line">&#125;</span><br><span class="line">.post-button a&#123;</span><br><span class="line">  border-bottom: 1px solid #666;</span><br><span class="line">&#125;</span><br><span class="line">.post-button a:hover &#123;</span><br><span class="line">  color: #ea481e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然能力有限，我也真整不出朵花来了</p><p>有些效果没有做，像美化代码块，改字体，添加点击爆炸/桃心</p><p>到这里基本上美化就已经结束了！</p><p>不过字体大小真应该改改了，H1竟然感觉和Title字体都差不多大，甚至还大了</p><h3 id="坑10"><a href="#坑10" class="headerlink" title="坑10?"></a>坑10?</h3><p>添加分享按钮<br>主题配置文件中默认就有AddThis；所以这个是最简单的，官网有说明，但是教程可能不是新的，新版的AddThis获取ID的方式更简单了，<br>在<a href="https://www.addthis.com/dashboard" target="_blank" rel="noopener">ADDThis</a>注册个账号，然后按着步骤选你要分享的平台和样式，最后就是获取ID就行<br><img src="https://raw.githubusercontent.com/zzzhbr/notebook-image/master/notebook/2019/09/07/1567852282030-1567852282031.png" alt="title"><br>把Code Only View打开，然后选择wordpress，因为这个最简单，得到的就是ID，把这串字符复制黏贴进主题配置文件的add_this_id:后面就行了，注意<code>:</code>后面有个空格</p><p>但是家里这个分享，感觉页面加载有些慢了</p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>未实现的效果：</p><ol><li>Mist样式的首页边框阴影，<br><del>element.style内联</del></li><li>Mist样式的菜单栏的下拉二级菜单（好像是主题不支持）</li><li>Mist样式的离开页面标题奔溃效果未实现<br>在next\source\js\src文件夹下创建crash_cheat.js，添加代码：</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--崩溃欺骗--&gt;</span><br><span class="line"> var OriginTitle = document.title;</span><br><span class="line"> var titleTime;</span><br><span class="line"> document.addEventListener(&apos;visibilitychange&apos;, function () &#123;</span><br><span class="line">     if (document.hidden) &#123;</span><br><span class="line">         $(&apos;[rel=&quot;icon&quot;]&apos;).attr(&apos;href&apos;, &quot;/img/TEP.ico&quot;);</span><br><span class="line">         document.title = &apos;╭(°A°`)╮ 页面崩溃啦 ~&apos;;</span><br><span class="line">         clearTimeout(titleTime);</span><br><span class="line">     &#125;</span><br><span class="line">     else &#123;</span><br><span class="line">         $(&apos;[rel=&quot;icon&quot;]&apos;).attr(&apos;href&apos;, &quot;/favicon.ico&quot;);</span><br><span class="line">         document.title = &apos;(ฅ&gt;ω&lt;*ฅ) 噫又好了~&apos; + OriginTitle;</span><br><span class="line">         titleTime = setTimeout(function () &#123;</span><br><span class="line">             document.title = OriginTitle;</span><br><span class="line">         &#125;, 2000);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure><p>引用<br>在next\layout_layout.swig文件中，添加引用（注：在swig末尾添加）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--崩溃欺骗--&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/js/src/crash_cheat.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>没有效果<br>暂时没有找到解决方法</p><ol start="4"><li>引入在线聊天，但是手机端会遮挡住部分右下角的目录图标（导致手机目录没法用）</li><li>其他</li></ol><p>还可以添加的效果：</p><p>还可以添加的效果：</p><ul><li><input disabled type="checkbox"> <ol><li>CDN优化</li></ol></li><li><input disabled type="checkbox"> <ol start="2"><li>SEO优化</li></ol></li><li><input disabled type="checkbox"> <ol start="3"><li>引入<a href="https://novnan.github.io/Hexo/emojis-for-hexo-next/" target="_blank" rel="noopener"> emoji 表情</a></li></ol></li><li><input disabled type="checkbox"> <ol start="4"><li>看板猫</li></ol></li><li><input disabled type="checkbox"> <ol start="5"><li>hi一下（哈林摇）</li></ol></li><li><input disabled type="checkbox"> <ol start="6"><li>左右分栏</li></ol></li><li><input disabled type="checkbox"> <ol start="7"><li>文章分页</li></ol></li><li><input disabled type="checkbox"> <ol start="8"><li>暂时未想到</li></ol></li><li><input disabled type="checkbox"> <ol start="9"><li>代码块的Mac Panel特效样式</li></ol></li><li><input disabled type="checkbox"> <ol start="10"><li>代码块折叠</li></ol></li><li><input disabled type="checkbox"> <ol start="11"><li><del>魔改</del></li></ol></li></ul><p><strong>最后希望不是 建博客折腾N天，写博客1天</strong><br>由于是Markdown写的，所以还要学习下md的语法</p><p>这篇文就佛性更新…</p></div>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言：&quot;&gt;&lt;a href=&quot;#前言：&quot; class=&quot;headerlink&quot; title=&quot;前言：&quot;&gt;&lt;/a&gt;前言：&lt;/h2&gt;&lt;p&gt;现在博客网站极多，但是是不是总感觉有些地方不满意？&lt;br&gt;又或者看到有些人的博客感觉做的很漂亮，那他们又是怎么做的呢？&lt;/p&gt;
    
    </summary>
    
    
      <category term="tips" scheme="https://zzzhbr.github.io/categories/tips/"/>
    
    
      <category term="hexo" scheme="https://zzzhbr.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://zzzhbr.github.io/2019/09/07/readtest/"/>
    <id>https://zzzhbr.github.io/2019/09/07/readtest/</id>
    <published>2019-09-07T13:15:25.809Z</published>
    <updated>2019-09-07T07:13:06.092Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><a id="more"></a><p>这是阅读版块一个测试页面</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css&quot;&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;p&gt;这是阅读版块一个测试页面&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="read" scheme="https://zzzhbr.github.io/categories/read/"/>
    
    
      <category term="read" scheme="https://zzzhbr.github.io/tags/read/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://zzzhbr.github.io/2019/09/07/hello-world/"/>
    <id>https://zzzhbr.github.io/2019/09/07/hello-world/</id>
    <published>2019-09-07T13:15:25.808Z</published>
    <updated>2019-09-07T07:02:31.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><a id="more"></a><p>这是一个测试页面</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css&quot;&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;p&gt;这是一个测试页面&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="python" scheme="https://zzzhbr.github.io/categories/python/"/>
    
    
      <category term="tips" scheme="https://zzzhbr.github.io/tags/tips/"/>
    
  </entry>
  
  <entry>
    <title>git+hexo打造属于你的网站</title>
    <link href="https://zzzhbr.github.io/2019/09/07/git+hexo%E6%89%93%E9%80%A0%E5%B1%9E%E4%BA%8E%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99/"/>
    <id>https://zzzhbr.github.io/2019/09/07/git+hexo打造属于你的网站/</id>
    <published>2019-09-07T13:15:25.807Z</published>
    <updated>2019-09-07T07:08:04.837Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="基础介绍"><a href="#基础介绍" class="headerlink" title="基础介绍"></a>基础介绍</h1><p>是不是觉得现在的博客五花八门，但又感觉没有适合自己的。</p><p>直到<strong>HEXO</strong>；<strong>Jekyll</strong>等的出现；可以和github结合起来就可以打造属于自己的博客了！而且是免费的哦！！！</p><a id="more"></a><p>建议新手先可以先选用hexo；有些基础了再来玩Jeklly。</p><p>hexo是基于Node.js的静态博客程序；所以搭建过程或许你会觉得比jeklly繁琐些，但是相信我，配置修改等高度DIY的东西会让你累觉不爱的！</p><p>下面开始DIY之旅吧</p><h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h1><h2 id="0-github"><a href="#0-github" class="headerlink" title="0. github"></a>0. github</h2><p><strong>首先注册个github的账号</strong></p><p>直接正常注册就好</p><p>接着在右上角有个<strong>+</strong>号，点击<strong>+</strong> New reposition  新建一个仓库</p><p>这个Repository name必须是：<strong>用户名</strong>.github.io   （这里的用户名用你的github账号名）</p><p>例如我的就是zzzhbr.github.io</p><p>加下去Description (optional)可以根据你自己的想法写（也可不写）</p><p>public</p><p>Initialize this repository with a README这个也可以勾上</p><p>create repository 就行</p><p>这个README是md文档；可以根据自己的想法写；比如就简单的介绍一下是个仓库干嘛的就行</p><h2 id="1-安装Node-js"><a href="#1-安装Node-js" class="headerlink" title="1. 安装Node.js"></a>1. 安装Node.js</h2><p>首先到<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js</a>的官网上下载平台</p><p>新版本直接下载就行了；我下的是<strong>当下最新版：10.16.0LTS</strong></p><p>这个安装过程就很简单了；双击运行node-v10.16.0-x64.msi；然后一直下一步操作即可</p><p>win+r</p><p>输入cmd，输入node -v检查下是否安装成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\zzz&gt;node -v</span><br><span class="line">v10.16.0</span><br></pre></td></tr></table></figure><h2 id="2-安装Git"><a href="#2-安装Git" class="headerlink" title="2.安装Git"></a>2.安装Git</h2><p>简单来说Git是开源的分布式版本控制系统</p><p>我们在本地先搭建博客，然后用git同步到github上面去</p><p>到官网上去下载<a href="https://git-scm.com/download/win" target="_blank" rel="noopener">git</a> 我下载的依然是<strong>当下最新</strong>的<strong>2.22.0 64-bit</strong></p><p>也是双击Git-2.22.0-64-bit.exe直接安装即可</p><p>安装成功后，可以开始讲Git与GitHub帐号绑定，鼠标右击打开Git Bash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"你的GitHub用户名"</span></span><br><span class="line">git config --global user.email <span class="string">"你的GitHub注册邮箱"</span></span><br></pre></td></tr></table></figure><p>生成SSH秘钥文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"你的GitHub注册邮箱"</span></span><br></pre></td></tr></table></figure><p>如果有交互直接回车就好（3次回车）</p><p>结束后仔细看结果会发现有秘钥存放的位置：</p><p>Your identification has been saved in /c/Users/zzz/.ssh/id_rsa.<br>Your public key has been saved in /c/Users/zzz/.ssh/id_rsa.pub.</p><p>打开文件夹</p><p>然后用记事本打开id_rsa.pub 这个文件就行</p><p>接着将里面的内容全部复制</p><p>点击你的头像————&gt;Settings————-&gt;SSH and GPG keys———-&gt;New SSH key</p><p>Title是标题，任意填即可</p><p>Key框里黏贴上刚刚复制的内容；最后点击Add SSH key</p><p>在Git Bash中检测GitHub公钥设置是否成功，输入 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ssh git@github.com ：</span><br><span class="line">The authenticity of host <span class="string">'github.com (13.229.188.59)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes #第一次连接要手动输入yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">出现</span></span><br><span class="line"><span class="string">Hi zzzhbr! You'</span>ve successfully authenticated, but GitHub does not provide shell access.</span><br><span class="line">Connection to github.com closed.</span><br><span class="line"></span><br><span class="line">You<span class="string">'ve successfully authenticated 这个就代表成功</span></span><br></pre></td></tr></table></figure><p>这里配置ssh-key的原因是如果以后用git推送的话，可以直接不用输入密码ssh连接上去，方便git推送到github上</p><h1 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h1><p>Hexo就是我们的个人博客网站的框架</p><p>这里需要自己在电脑常里创建一个文件夹，可以命名为blog或其他自己想要的</p><p>Hexo框架与以后你自己发布的网页都在这个文件夹中。创建好后，进入文件夹中，按住shift键，右击鼠标点击在此处打开命令窗口</p><p><strong>注意以下的操作都是在blog的文件夹下进行</strong></p><p><strong>在blog文件夹下打开命令行，打开git bash here</strong></p><p>命令行：在blog文件夹下shift+右键   在此处打开命令窗口</p><p>git bash here 就是git的命令行</p><p>在命令行使用命令安装Hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>这个安装时间较长耐心等待，安装完成后</p><p>在blog这个文件夹里右键git bash here输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo init </span><br><span class="line"><span class="comment">#可以将 blog 文件夹初始化成一个博客文件夹</span></span><br><span class="line">npm install </span><br><span class="line"><span class="comment">#安装依赖包</span></span><br></pre></td></tr></table></figure><p>如果出现错误：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm WARN babel-eslint@10.0.2 requires a peer of eslint@&gt;= 4.12.1 but none is installed. You must install peer dependencies yourself.</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules\fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="keyword">for</span> fsevents@1.2.9: wanted &#123;<span class="string">"os"</span>:<span class="string">"darwin"</span>,<span class="string">"arch"</span>:<span class="string">"any"</span>&#125; (current: &#123;<span class="string">"os"</span>:<span class="string">"win32"</span>,<span class="string">"arch"</span>:<span class="string">"x64"</span>&#125;)</span><br></pre></td></tr></table></figure><p>在命令行输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install lodash</span><br><span class="line">npm install eslint@^4.12.1</span><br></pre></td></tr></table></figure><p>为了检测我们的网站雏形，分别按顺序输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line"><span class="comment"># 生成（generate）网页。 由于我们还没创建任何博客，生成的网页会展示 Hexo 里面自带了一个 Hello World 的博客。</span></span><br><span class="line">hexo s</span><br><span class="line"><span class="comment"># 将生成的网页放在了本地。，输入完成后就可以测试了</span></span><br></pre></td></tr></table></figure><p>打开浏览器输入地址：</p><p>localhost:4000</p><p>可以看到我们的网站了，并且有个Hello World 的文章</p><p>回到我们打开的git bash 按ctrl+c 停止本地博客</p><p>再去强制刷新页面（ctrl+F5）就会发现无法访问了</p><h2 id="发布到github上"><a href="#发布到github上" class="headerlink" title="发布到github上"></a>发布到github上</h2><p>刚刚我们的操作只是在本地上可以使用，但是不能让广大网友看见，所以我们接下来就要将他部署到github上面去</p><p>在blog的根目录下有个<strong>_config.yml</strong>  这是<strong>站点</strong>配置文件</p><p>翻到最后面</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将原先的</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span></span><br><span class="line"><span class="comment">#更改成</span></span><br><span class="line"><span class="attr">deploy:</span> </span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">这里填入你之前在GitHub上创建仓库的完整路径，记得加上</span> <span class="string">.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>参考如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="attr">https://github.com/zzzhbr/zzzhbr.github.io.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>保存站点配置文件；这一步就是让hexo知道你要把blog部署在github仓库上</p><p>最后安装git部署插件(在命令行部署)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>如果出现错误</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm WARN ajv-keywords@3.4.1 requires a peer of ajv@^6.9.1 but none is installed. You must install peer dependencies yourself.</span><br></pre></td></tr></table></figure><p>解决：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ajv@^6.9.1</span><br></pre></td></tr></table></figure><p>然后在git bash here上，我们分别输入三条命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean </span><br><span class="line">hexo g </span><br><span class="line">hexo d</span><br><span class="line">跳出github的登录页面，登录即可</span><br></pre></td></tr></table></figure><p>其实第三条的 hexo d 就是部署网站命令，d是deploy的缩写。</p><p>完成后，打开浏览器，在地址栏输入你的放置个人网站的仓库路径，即 <a href="https://zzzhbr.github.io">https://zzzhbr.github.io</a></p><p>就是_config.yml配置里的那段repo: <a href="https://github.com/zzzhbr/zzzhbr.github.io.git" target="_blank" rel="noopener">https://github.com/zzzhbr/zzzhbr.github.io.git</a> 取最后的那个部分zzzhbr.github.io.git将git去掉就行</p><p>然后就会惊奇的发现网站已经搭建完成了</p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>之所以用命令行来执行npm的相关命令是因为能看见详细信息</p><p>这是最简单的hexo默认主题搭建的；如果需要美化，请到hexo官网下载好看的主题或自己编写！</p><p>如果hexo官网找到自己喜欢的主题，请根据主题的直到说明进行操作即可！</p><p>最后</p><p>enjoy it！！！</p><h2 id="下载主题配置示例"><a href="#下载主题配置示例" class="headerlink" title="下载主题配置示例"></a>下载主题配置示例</h2>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;基础介绍&quot;&gt;&lt;a href=&quot;#基础介绍&quot; class=&quot;headerlink&quot; title=&quot;基础介绍&quot;&gt;&lt;/a&gt;基础介绍&lt;/h1&gt;&lt;p&gt;是不是觉得现在的博客五花八门，但又感觉没有适合自己的。&lt;/p&gt;
&lt;p&gt;直到&lt;strong&gt;HEXO&lt;/strong&gt;；&lt;strong&gt;Jekyll&lt;/strong&gt;等的出现；可以和github结合起来就可以打造属于自己的博客了！而且是免费的哦！！！&lt;/p&gt;
    
    </summary>
    
    
      <category term="tips" scheme="https://zzzhbr.github.io/categories/tips/"/>
    
    
      <category term="hexo" scheme="https://zzzhbr.github.io/tags/hexo/"/>
    
  </entry>
  
</feed>
